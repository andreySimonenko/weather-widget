(function(e){function t(t){for(var n,s,c=t[0],o=t[1],u=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,c=1;c<r.length;c++){var o=r[c];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={index:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/weather-widget/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"0816":function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},"73e3":function(e,t,r){e.exports=r.p+"img/geo.0b8b376f.svg"},"9c0c":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app"},[r("Weather")],1)},i=[],s=r("d4ec"),c=r("262e"),o=r("2caf"),u=r("9ab4"),l=r("60a3"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"weather-container"},[e.errorMsg?n("div",{staticClass:"weather-container__message error"},[e._v(" "+e._s(e.errorMsg)+" ")]):e.statusMsg?n("div",{staticClass:"weather-container__message status"},[e._v(" "+e._s(e.statusMsg)+" ")]):e.currentData?n("div",{staticClass:"weather-widget weather-container__widget"},[n("div",{staticClass:"header weather-widget__header"},[n("h1",{staticClass:"header__title"},[e._v(e._s(e.location))]),n("button",{staticClass:"header__location-btn",on:{click:e.loadWeatherByGeo}},[n("img",{attrs:{src:r("73e3")}})])]),n("div",{staticClass:"weather-widget__weekday"},[e._v(e._s(e.weekday))]),n("div",{staticClass:"weather-widget__desc"},[e._v(e._s(e.desc))]),n("div",{staticClass:"weather-info weather-widget__info"},[n("img",{staticClass:"weather-info__icon",attrs:{src:e.iconUrl}}),n("div",{staticClass:"weather-info__temp"},[n("span",{staticClass:"weather-info__temp-value"},[e._v(e._s(e.temp))]),n("button",{staticClass:"weather-info__temp-metric-btn",class:{active:e.isMetric},on:{click:function(t){return e.setIsMetric(!0)}}},[e._v("°C")]),n("span",[e._v("|")]),n("button",{staticClass:"weather-info__temp-metric-btn",class:{active:!e.isMetric},on:{click:function(t){return e.setIsMetric(!1)}}},[e._v("°F")])]),n("div",{staticClass:"weather-info__indicators"},[n("div",[e._v("Ощущается как: "+e._s(e.feelsLikeTemp)+" °C")]),n("div",[e._v("Влажность: "+e._s(e.humidity))]),n("div",[e._v("Давление: "+e._s(e.pressure))]),n("div",[e._v("Ветер: "+e._s(e.wind))])])]),n("div",{staticClass:"weather-daily weather-widget__daily"},e._l(e.dailyWeather,(function(t){return n("div",{key:t.dt,staticClass:"weather-daily__item",class:{active:t.d===e.currentData},on:{click:function(r){return e.setCurrentData(t.d)}}},[n("div",{staticClass:"weather-daily__title"},[e._v(e._s(t.weekday))]),n("div",{staticClass:"weather-daily__icon"},[n("img",{staticClass:"weather-info__icon",attrs:{src:t.iconUrl}})]),n("div",{staticClass:"weather-daily__temp"},[n("span",[e._v(e._s(t.dayTemp))]),n("span",[e._v(e._s(t.nightTemp))])])])})),0)]):e._e()])},p=[],h=(r("a4d3"),r("e01a"),r("d81d"),r("53ca")),f=(r("96cf"),r("1da1")),g=r("bee2"),w=(r("99af"),r("d3b7"),"//api.openweathermap.org/data"),v="2.5",y="da72101f3dc39e9fe060e061d52fb04e",_="ru",m=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="".concat(w,"/").concat(v,"/onecall?lat=").concat(t,"&lon=").concat(r,"&exclude=minutely,hourly,alerts&units=metric&lang=").concat(_,"&appid=").concat(y),e.next=3,fetch(n);case 3:if(a=e.sent,a.ok){e.next=6;break}throw new Error("Не удалось получить информацию о погоде.");case 6:return e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),b={getByCoords:m},k=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!("permissions"in navigator)){e.next=5;break}return e.next=3,navigator.permissions.query({name:"geolocation"});case 3:return t=e.sent,e.abrupt("return","granted"===t.state);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){if("geolocation"in navigator){var r={enableHighAccuracy:!0,timeout:1e4,maximumAge:1/0},n=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e(r.coords);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(e){switch(e.code){case e.PERMISSION_DENIED:t(new Error("Определение местоположения запрещенно. Необходимо разрешить его в настройках браузера."));break;case e.POSITION_UNAVAILABLE:t(new Error("Не удалось определить местоположение. Воспользуйтесь другим браузером."));break;case e.TIMEOUT:t(new Error("Не удалось определить местоположение. Повторите попытку позже."));break}};navigator.geolocation.getCurrentPosition(n,a,r)}else t(new Error("Не удалось определить местоположение. Воспользуйтесь другим браузером."))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x={isAllowLocation:k,getBrowserLocation:O},j="https://suggestions.dadata.ru/suggestions/api",C="4_1",D="8b5db846819b47f78300037311cb1d59a9c68d2c",M=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+D},body:JSON.stringify({lat:t,lon:r})},a="".concat(j,"/").concat(C,"/rs/geolocate/address"),e.next=4,fetch(a,n);case 4:if(i=e.sent,i.ok){e.next=7;break}return e.abrupt("return","Не удалось получить информацию об адресе.");case 7:return e.next=9,i.json();case 9:if(s=e.sent,!Array.isArray(s.suggestions)||!s.suggestions.length){e.next=12;break}return e.abrupt("return",s.suggestions[0].data.city+", "+s.suggestions[0].data.region_with_type);case 12:return e.abrupt("return","");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),T={getLocationByCoords:M},R=function(e){Object(c["a"])(r,e);var t=Object(o["a"])(r);function r(){var e;return Object(s["a"])(this,r),e=t.apply(this,arguments),e.statusMsg="",e.errorMsg="",e.isMetric=!0,e.location="",e.currentData=null,e.dailyData=[],e}return Object(g["a"])(r,[{key:"mounted",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadWeatherByGeo();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadWeatherByGeo",value:function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.isAllowLocation();case 3:if(!e.sent){e.next=7;break}e.t0="Определение местоположения.",e.next=8;break;case 7:e.t0="Для получения прогноза погоды, требуется разрешить доступ на определение Вашего местоположения.";case 8:return this.statusMsg=e.t0,e.next=11,x.getBrowserLocation();case 11:return t=e.sent,e.next=14,T.getLocationByCoords(t.latitude,t.longitude);case 14:return this.location=e.sent,this.statusMsg="Получаем прогноз погоды.",e.next=18,b.getByCoords(t.latitude,t.longitude);case 18:r=e.sent,this.currentData=r.current,this.dailyData=r.daily,this.statusMsg="",e.next=27;break;case 24:e.prev=24,e.t1=e["catch"](0),this.errorMsg=e.t1;case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setCurrentData",value:function(e){this.currentData=e}},{key:"setIsMetric",value:function(e){this.isMetric=e}},{key:"getTemp",value:function(e){var t=0;return"number"===typeof e?t=e:"object"===Object(h["a"])(e)&&(t=e.day),this.isMetric||(t=9*t/5+32),Math.round(t)}},{key:"weekday",get:function(){return new Date(1e3*this.currentData.dt).toLocaleDateString("ru-RU",{weekday:"long"})}},{key:"temp",get:function(){return this.getTemp(this.currentData.temp)}},{key:"feelsLikeTemp",get:function(){return this.getTemp(this.currentData.feels_like)}},{key:"humidity",get:function(){return"".concat(this.currentData.humidity," %")||!1}},{key:"pressure",get:function(){return"".concat(this.currentData.pressure," гПа")||!1}},{key:"wind",get:function(){return"".concat(this.currentData.wind_speed," м/c")||!1}},{key:"weather",get:function(){return Array.isArray(this.currentData.weather)&&this.currentData.weather.length?this.currentData.weather[0]:{}}},{key:"desc",get:function(){return this.weather.description}},{key:"iconUrl",get:function(){return this.weather.icon?"//openweathermap.org/img/wn/".concat(this.weather.icon,"@2x.png"):""}},{key:"dailyWeather",get:function(){var e=this;return this.dailyData.map((function(t){return{d:t,dt:t.dt,weekday:new Date(1e3*t.dt).toLocaleDateString("ru-RU",{weekday:"short"}),iconUrl:Array.isArray(t.weather)&&t.weather.length?"//openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"):"",dayTemp:t.temp.day?"".concat(e.getTemp(t.temp.day),"°"):"",nightTemp:t.temp.day?"".concat(e.getTemp(t.temp.night),"°"):""}}))}}]),r}(l["b"]);R=Object(u["a"])([l["a"]],R);var A=R,E=A,L=(r("d54c"),r("2877")),P=Object(L["a"])(E,d,p,!1,null,"0c998180",null),S=P.exports,B=function(e){Object(c["a"])(r,e);var t=Object(o["a"])(r);function r(){return Object(s["a"])(this,r),t.apply(this,arguments)}return r}(l["b"]);B=Object(u["a"])([Object(l["a"])({components:{Weather:S}})],B);var I=B,U=I,W=(r("5c0b"),Object(L["a"])(U,a,i,!1,null,null,null)),N=W.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(N)}}).$mount("#app")},d54c:function(e,t,r){"use strict";r("0816")}});
//# sourceMappingURL=index.ccb4d3e7.js.map